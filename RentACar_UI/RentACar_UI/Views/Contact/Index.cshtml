@{
    Layout = "/Views/Shared/_Layout.cshtml";
}

@section customStyle{
    <!-- Template CSS -->
    <link href="//fonts.googleapis.com/css?family=Poppins:300,400,400i,500,600,700&display=swap" rel="stylesheet">
    <link href="//fonts.googleapis.com/css2?family=Limelight&display=swap" rel="stylesheet">
    <!-- Template CSS -->
    <link rel="stylesheet" href="~/layoutstyle/css/style-starter.css">,
    <!-- Template CSS -->
    }

@section customJScript{
    <!--//MENU-JS-->
    <script src="~lib/jquery/dist/jquery.js"></script>
    <script src="~/layoutstyle/js/bootstrap.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Other necessary scripts -->
    <script src="~/path/to/jquery.countup.js"></script>
    <script src="~/path/to/jquery.waypoints.min.js"></script>
    <script src="~/path/to/jquery.magnific-popup.min.js"></script>
    <script src="~/adminpanel/plugins/bootstrap/js/bootstrap.js"></script>
    <script src="~/layoutstyle/js/theme-change.js"></script>
    <script src="~/layoutstyle/js/owl.carousel.js"></script>
    <script src="~/layoutstyle/js/jquery.waypoints.min.js"></script>
    <script src="~/layoutstyle/js/jquery.countup.js"></script>
}



@functions {
    string IsValidEmailFunction = @"
    function isValidEmail(email) {
    var emailRegex = /\S+@\S+\.\S+/;
    return emailRegex.test(email);
    }
    ";
    }

<script src="~/lib/jquery/dist/jquery.min.js"></script>


<script>

    $(document).ready(function () {
        @Html.Raw(IsValidEmailFunction)
            $("#btnGonder").click(function () {
                var Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 3000
                });

                var adi = $("#txtAdi").val();
                var konu = $("#txtKonu").val();
                var email = $("#txtEmailAdresi").val();
                var mesaj = $("#txtMessage").val();

                if (adi.length > 50 || konu.length > 50 || email.length > 50 || mesaj.length > 200) {
                    Toast.fire({
                        icon: 'error',
                        title: 'Lütfen en fazla 50 karakter giriniz.'
                    });
                    return;
                }

                if (adi === "" || konu === "" || email === "" || mesaj === "") {
                    Toast.fire({
                        icon: 'error',
                        title: 'Lütfen gerekli alanları doldurunuz.'
                    });
                    return;
                }

                if (!isValidEmail(email)) {
                    Toast.fire({
                        icon: 'error',
                        title: 'Lütfen geçerli bir e-posta adresi giriniz.'
                    });
                    return;
                }

                var model = {
                    ContactName: adi,
                    ContactEposta: email,
                    ContactKonu: konu,
                    ContactMessage: mesaj,
                };

                $.ajax({
                    url: "/Contact/AddContact",
                    method: "post",
                    datatype: "json",
                    data: { dto: model },
                    success: function (response) {
                        if (response.result && response.basariliMi) {
                            Swal.fire({
                                title: "Başarılı",
                                text: response.message,
                                icon: "success",
                                confirmButtonColor: "#3085d6",
                                cancelButtonColor: "#d33",
                                confirmButtonText: "Kapat"
                            }).then((result) => {
                                if (result.isConfirmed) {
                                    $("#divNewContact").modal("hide");
                                    setTimeout(function () {
                                        window.location.href = "/Home/Index";
                                    }, 1000);
                                }
                            });
                        } else {
                            Toast.fire({
                                icon: 'error',
                                title: response.message,
                            });
                        }
                    },
                    error: function () {
                        Toast.fire({
                            icon: 'error',
                            title: 'Bir hata oluştu, lütfen tekrar deneyin.'
                        });
                    }
                });
            });
    });
</script>


<!-- Hakkında kırıntısı -->
<section class="w3l-about-breadcrumb position-relative text-center">
    <div class="breadcrumb-bg breadcrumb-bg-about py-sm-5 py-4">
        <div class="container py-lg-5 py-3">
            <h2 class="title">Bize Ulaşın</h2>
            <ul class="breadcrumbs-custom-path mt-2">
                <li><a href="/Home/Index">Ana Sayfa</a></li>
                <li class="active"><span class="fa fa-angle-double-right mx-2" aria-hidden="true"></span> İletişim </li>
            </ul>
        </div>
    </div>
</section>
<!-- //Hakkında kırıntısı -->
<section class="w3l-contact-11">
    <div class="form-41-mian py-5">
        <div class="container py-lg-4">
            <div class="row align-form-map">
                <div class="col-lg-6 contact-left pr-lg-4">
                    <div class="partners">
                        <div class="cont-details">
                            <div class="title-content text-left">
                                <h6 class="sub-title">Bize Ulaşın</h6>
                                <h3 class="hny-title">İletişime Geçin</h3>
                            </div>
                            <p class="mt-3 mb-4 pr-lg-5">
                                Merhaba, Faks, e-posta veya telefonla 7/24 erişilebiliriz. Bir satır bırakın, böylece daha fazla konuşabiliriz.
                            </p>
                            <h6 class="mb-4"> Daha fazla bilgi veya ürün projemiz ve fiyatlandırma hakkında soru sormak için lütfen bizimle iletişime geçin.</h6>
                        </div>
                        <div class="hours">
                            <h6 class="mt-4">E-posta:</h6>
                            <p>
                                <a href="mailto:info@example.com">
                                    enesoksuz@yahoo.com
                                </a>
                            </p>
                            <h6 class="mt-4">Adres:</h6>
                            <p> Türkiye Ankara</p>
                            <h6 class="mt-4">İletişim:</h6>
                            <p class="margin-top">
                                <a href="tel:+(90)543 493 8812">
                                    +(90)543 493 8812
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 form-inner-cont">
                    <div class="title-content text-left">
                        <h3 class="hny-title mb-lg-5 mb-4">Bize Mesaj Gönderin</h3>
                    </div>
                    <form>
                        <div class="form-group">
                            <input type="text" class="form-control" id="txtAdi" placeholder="İsim Soyisim" />
                        </div>
                        <div class="row con-two">
                            <div class="col-lg-6 form-group">
                                <input type="email" class="form-control" id="txtEmailAdresi" placeholder="E-posta" />
                            </div>
                            <div class="col-lg-6 form-group">
                                <input type="text" class="form-control" id="txtKonu" placeholder="Konu" />
                            </div>
                        </div>
                        <div class="form-group">
                            <textarea placeholder="Mesaj" class="form-control" id="txtMessage"></textarea>
                        </div>
                        <div class="submit-button text-lg-right">
                            <button type="button" id="btnGonder" class="btn btn-style">Gönder</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="map">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d30579.817576860097!2d32.82533900910158!3d39.93336426082151!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14d3375a286a2b59%3A0xbfb2722a79e91d56!2sAnkara%2C%20Turkey!5e0!3m2!1sen!2s!4v1621552771703!5m2!1sen!2s" frameborder="0" style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
    </div>
</section>

